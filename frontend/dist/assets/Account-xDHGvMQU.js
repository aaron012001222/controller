import{d as y,r as v,a as V,c as B,b as o,w as a,e as s,f as c,g as m,E as p,h as k,s as C,u as E,o as h}from"./index-nhwMw6Pm.js";const N={class:"p-6"},T={class:"flex items-center justify-between"},U=y({__name:"Account",setup(M){const i=E(),n=v(!1),t=V({username:"",password:""}),_=async()=>{if(!t.username||!t.password){p.warning("用户名和密码都不能为空");return}try{await k.confirm("确定要修改登录账号和密码吗？修改后需要重新登录。","安全警告",{confirmButtonText:"确定修改",cancelButtonText:"取消",type:"warning"}),n.value=!0;const l=await C.post("/user/update",t);p.success(l.message||"修改成功，请重新登录"),localStorage.removeItem("app_token"),i.push("/login")}catch(l){console.error(l)}finally{n.value=!1}};return(l,e)=>{const f=s("el-tag"),w=s("el-alert"),u=s("el-input"),r=s("el-form-item"),g=s("el-button"),x=s("el-form"),b=s("el-card");return h(),B("div",N,[o(b,{class:"box-card max-w-2xl mx-auto"},{header:a(()=>[m("div",T,[e[3]||(e[3]=m("span",{class:"text-lg font-bold"},"管理员账户设置",-1)),o(f,{type:"danger",effect:"dark"},{default:a(()=>[...e[2]||(e[2]=[c("高敏感操作",-1)])]),_:1})])]),default:a(()=>[o(w,{title:"修改提示",type:"warning",description:"修改用户名或密码后，系统将强制退出登录，您需要使用新凭证重新进入。","show-icon":"",closable:!1,class:"mb-6"}),o(x,{model:t,"label-width":"100px",size:"large"},{default:a(()=>[o(r,{label:"新用户名"},{default:a(()=>[o(u,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=d=>t.username=d),placeholder:"请输入新的登录账号"},null,8,["modelValue"])]),_:1}),o(r,{label:"新密码"},{default:a(()=>[o(u,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=d=>t.password=d),type:"password",placeholder:"请输入新的登录密码","show-password":""},null,8,["modelValue"])]),_:1}),o(r,null,{default:a(()=>[o(g,{type:"primary",onClick:_,loading:n.value,class:"w-full"},{default:a(()=>[...e[4]||(e[4]=[c(" 确认修改并重新登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}});export{U as default};
